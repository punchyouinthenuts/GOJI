[tmtermcontroller.cpp contents updated as described in the last assistant message]